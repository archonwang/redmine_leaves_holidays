
<h2>Leave Request:</h2>
<fieldset>
	<p><strong>Notice:</strong> Bank Holidays for your region (<%= LeavesHolidaysLogic.user_params(@user, :region) %>) and week ends are automatically ignored.</p>
	<p><strong>Important:</strong> Creating a leave request <strong>does not</strong> submit it. Once it is created, please review the leave details. If you are happy with the details, hit the submit button. A confirmation email will be sent to you once the submission is successful.</p>
</fieldset>
<br />
<fieldset>
	<% if @is_ok_to_submit_leave %>
	<p><strong>The following people will be notified for your request: </strong></p>
	<% if @managed_list.any? %>
		<p><strong>For Management:</strong> <%= @managed_list.map(&:name).join(', ') %></p>
	<% end %>
	<% if @consult_list.any? %>
		<p><strong>For Consultation:</strong> <%= @consult_list.map(&:name).join(', ') %></p>
	<% end %>
	<% if @notify_approved_full.any? %>
		<p><strong>For Notification once approved:</strong> <%= @notify_approved_full.map(&:name).join(', ') %></p>
	<% end %>
	
	
<% end %>

</fieldset>
<br/>
<fieldset>
<%= form_for(@leave) do |f| %>
	
	<% if @leave.errors.any? %>
	<div class="flash error">
		<ul>
	  		<% @leave.errors.full_messages.each do |msg| %>
	    		<li><%= msg %></li>
	  		<% end %>
		</ul>
	</div>
	<% end %>

<div>
	

		<p><%= l(:label_leave_period_absence) %></p>
		
		<p>
			<%= l(:label_leave_from) %><%= f.date_field :from_date, readonly: true %><%= calendar_for('leave_request_from_date') %>
			<%= l(:label_leave_to) %><%= f.date_field :to_date, readonly: true %><%= calendar_for('leave_request_to_date') %> included
		</p>

		<p>
			<%= l(:label_leave_half_full_day) %>
			<%= f.check_box :leave_time_am %>
			<%= label_tag(:leave_time_am, l(:label_leave_am)) %>
			<%= f.check_box :leave_time_pm %>
			<%= label_tag(:leave_time_pm, l(:label_leave_pm)) %>
		</p>

		<p>
			<label><%= l(:label_leave_reason) %>:</label>
 			<%- options = (@issues_trackers.collect {|a| [a.subject, a.id]}) -%>
			<%= f.select :issue_id, options, {:include_blank => "Please select"}, :required => true %>
		</p>

		<p>
			<label>Comments:</label>
			<%= f.text_field :comments, {:size => 75 } %>
		</p>


	
</div>


	<%= f.submit 'Create', data: { confirm: 'This will create a new leave request, but will not submit it for approval. You will be able to make changes to this request until you submit it.' } %>


<% end %>
<%= link_to l(:button_back), leave_requests_path %>
</fieldset>